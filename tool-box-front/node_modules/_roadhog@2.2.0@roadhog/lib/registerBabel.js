"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _path = require("path");

var _registerBabel = _interopRequireDefault(require("af-webpack/registerBabel"));

var _lodash = _interopRequireDefault(require("lodash.escaperegexp"));

function _default(babelPreset, opts) {
  var configOnly = opts.configOnly,
      disablePreventTest = opts.disablePreventTest,
      ignore = opts.ignore,
      cwd = opts.cwd;
  var files = ['.roadhogrc.mock.js', '.webpackrc.js', 'webpack.config.js', 'mock', 'src'].map(function (file) {
    return (0, _lodash.default)((0, _path.join)(cwd, file));
  });
  var only = configOnly ? [new RegExp("(".concat(files.join('|'), ")"))] : null;
  (0, _registerBabel.default)({
    only: only,
    ignore: ignore,
    babelPreset: babelPreset,
    disablePreventTest: disablePreventTest
  });
}